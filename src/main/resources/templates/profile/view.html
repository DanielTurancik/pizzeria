<!doctype html>
<html lang="sk"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Môj profil</title>
</head>
<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<h1>Môj profil</h1>

<div>
    <div th:if="${me.profileImageUrl != null && !me.profileImageUrl.isBlank()}">
        <img th:src="${me.profileImageUrl}" alt="profile" style="max-width:200px;">
    </div>
    <div th:if="${me.profileImageUrl == null || me.profileImageUrl.isBlank()}">
        Profilový obrázok nie je nastavený.
    </div>

    <p>
        Meno: <strong th:text="${me.firstName + ' ' + me.lastName}">Name</strong><br>
        E\-mail: <span th:text="${me.email}">mail</span><br>
        Telefón: <span th:text="${me.phoneNumber}">phone</span><br>
        Adresa: <span th:text="${me.address}">addr</span>
    </p>
</div>

<hr>

<h2>História objednávok</h2>

<div th:if="${#lists.isEmpty(orders)}">Zatiaľ nemáte žiadne objednávky.</div>

<table th:if="${!#lists.isEmpty(orders)}" border="1" cellpadding="6">
    <thead>
    <tr>
        <th>ID</th>
        <th>Stav</th>
        <th>Suma</th>
        <th>Adresa</th>
        <th>Detail</th>
        <th>Zrušiť</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="o : ${orders}">
        <td th:text="${o.id}">1</td>
        <td th:text="${o.status}">status</td>
        <td th:text="${o.totalPrice}">0.00</td>
        <td th:text="${o.deliveryAddress}">addr</td>
        <td><a th:href="@{'/orders/' + ${o.id}}">Zobraziť</a></td>
        <td>
            <form th:if="${o.status == 'čaká_na_potvrdenie'}"
                  th:action="@{'/profil/orders/' + ${o.id} + '/cancel'}"
                  method="post"
                  style="display:inline;">
                <button type="submit">Zrušiť</button>
            </form>
            <span th:if="${o.status != 'čaká_na_potvrdenie'}">\-</span>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>