<!doctype html>
<html lang="sk" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Ponuka pízz</title>
</head>
<body>

<div>
    <span sec:authorize="isAuthenticated()">
        Logged in as: <strong sec:authentication="name">email</strong>
        \| Roles: <span sec:authentication="authorities">roles</span>

        <form th:action="@{/logout}" method="post" style="display:inline;">
            <button type="submit">Logout</button>
        </form>
    </span>

    <span sec:authorize="isAnonymous()">
        <a th:href="@{/login}">Login</a>
    </span>
</div>

<h1>Ponuka pízz</h1>

<form method="get" action="/pizze">
    <input type="text" name="q" placeholder="Hľadať pizzu..." th:value="${q}">
    <button type="submit">Hľadať</button>
</form>

<hr>

<ul>
    <li th:each="p : ${pizzas}">
        <div>
            <a th:href="@{'/pizza/' + ${p.slug}}">
                <strong th:text="${p.name}">Názov</strong>
            </a>
            <span th:text="${p.description}">Popis</span>
        </div>
        <div th:if="${p.imageUrl != null}">
            <a th:href="@{'/pizza/' + ${p.slug}}">
                <img th:src="${p.imageUrl}" alt="pizza" style="max-width:200px; cursor:pointer;">
            </a>
        </div>
    </li>
</ul>
</body>
</html>
